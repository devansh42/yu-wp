version: "3.7"
services:
    db:
        hostname: db
        image: ${DOCKER_REG}/yu_wp:db
        
        env_file: 
            - env/db.env
        volumes: 
            - db-data:/var/lib/mysql
            - db-log:/var/log/mysql 
            - wp-data:/var/wp/db
        deploy:
            placement:
                constraints:
                    - "node.role==manager"    
        networks:
            - wp_overlay 
                        
volumes:
    wp-data: 
    db-data:
    db-log:    

networks:
    wp_overlay:
        external: 
            name: wp_overlay